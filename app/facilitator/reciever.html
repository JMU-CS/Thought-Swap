<ts-header></ts-header>


<div class="container component facilitator-controls">
  <div class="well well-lg text-center" id="controlBar">
    <button class="btn btn-primary" ng-click="distribute()">Distribute</button>
    <button class="btn btn-primary" ng-click="newSession()">New Session</button>
    <button class="btn btn-primary" ng-click="openPromptInput()">New Prompt</button>
    <button class="btn btn-primary" ng-click="testThoughts()">Test Thoughts</button>
    <br><br>


    <form class="form-horizontal facilitator-status">
      <label for="numthoughts"><i class="fa fa-comment"></i>Thoughts</label>
      <code><span id="numThoughts">{{participantThoughts.length}}</span></code>
      <label for="numSubmitters"><i class="fa fa-user"></i>Submitters</label>
      <code><span id="numSubmitters">{{numSubmitters}}</span></code>
      <label for="numConnected"><i class="fa fa-globe"></i>Connected</label>
      <code><span id="numConnected">{{numConnected}}</span></code>
    </form>
  </div>


  <textarea disabled class="form-control" id="prompt-display" ng-if="prompt.content.length > 0">{{prompt.content}}</textarea>
  <div class="panel panel-default" id="discussion">
    <div class="panel-body grid-container" id="dashboard">
      <ul dnd-list="participantThoughts" id="grid" class="grid">

        <li ng-repeat="thought in participantThoughts" 
            dnd-draggable="thought" 
            dnd-moved="participantThoughts.splice($index, 1)" 
            dnd-effect-allowed="move" 
            dnd-selected="models.selected = thought" 
            ng-class="{'selected': models.selected === thought, 
                       'highlighted-for_deletion': highlight===$index}" 
            >

            <div class="inner">
              <div class="controls">
                <span class="util">{{thought.id}}</span>
                <!-- TODO: Enlarge thought via ngMorph -->

                <!-- Delete Thought -->
                <i class="fa fa-times-circle delete-thought-icon util" 
                   ng-mouseenter="highlightForDeletion($index)" 
                   ng-mouseleave="unHighlightForDeletion()" 
                   ng-click="deleteThought($index)">
                </i>
              </div>
              <div class="grid-content" ng-bind-html="displayThought(thought)">
              </div>
            </div>

          <!-- <div class="panel panel-default">
            <div class="panel-heading">
              {{thought.id}}
              <i class="fa fa-times-circle delete-thought-icon" 
                 ng-mouseenter="highlightForDeletion($index)" 
                 ng-mouseleave="unHighlightForDeletion()" 
                 ng-click="deleteThought($index)">
              </i>
            </div>
            <div class="panel-body">
              <div class="thought-content" ng-bind-html="displayThought(thought)"></div>
            </div>
          </div> -->
        </li>

      </ul>
    </div>
  </div>
</div>
