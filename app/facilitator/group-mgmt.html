<ts-header></ts-header>

<div class="container">
 <div class="jumbotron" id="groups">
		<h2 id="groupHeader">Groups</h2>
		<button ng-click="createGroup()" class="pull-right btn btn-primary">New Group</button>
			<br>
				<div class="text-center">
					<img class="loadIcon" ng-if="dataLoading && groups === null" src="resources/loading.gif"/>	
				</div>
			<br>
		
		<div ng-show="groups.length === 0" class="alert alert-info text-center">You don't seem to have any groups. Why not make one? Use the New Group button to get started.</div>

		  <accordion close-others="true">
		    <!-- First Group -->
		    <accordion-group is-open="isFirstOpen" ng-if="groups.length > 0">
		        <accordion-heading>
		        	<div style="">
		            <a style="margin-left: auto;" ng-href="#/facilitator/{{groups[0].id}}"><strong>{{groups[0].name}}</strong></a>
		            <i class="pull-right fa" ng-class="{'fa-chevron-down': isFirstOpen, 'fa-chevron-right': !isFirstOpen}"></i>
		          </div>
		        </accordion-heading>
		        <div ng-repeat=" participant in groups[0].users">
		        	{{participant.username}}
		        </div>
		    </accordion-group>

		    <!-- All Remaining Groups -->
		    <accordion-group ng-repeat="group in groups.slice(1)" is-open="isOpen">
		        <accordion-heading>
		        	<div>
		        		<a ng-href="#/facilitator/{{groups[$index+1].id}}"><strong>{{groups[$index+1].name}}</strong></a>
		            <i class="pull-right fa" ng-class="{'fa-chevron-down': isOpen, 'fa-chevron-right': !isOpen}"></i>
		          </div>
		        </accordion-heading>
		        <div ng-repeat=" participant in group.users">
		        	{{participant.username}}
		        </div>
		    </accordion-group>
		  </accordion>
		</div>
	</div>
</div>

